(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[28],{"7UYU":function(e,t,a){"use strict";var n=a("g09b"),l=a("tAuX");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0,a("IzEo");var o=n(a("bx4M"));a("Mwp2");var i=n(a("VXEj"));a("Telt");var r=n(a("Tckk")),d=n(a("jehZ"));a("+L6B");var s=n(a("2/Rp"));a("2qtc");var c=n(a("kLXV")),u=n(a("p0pE")),f=n(a("2Taf")),p=n(a("vZ4D")),m=n(a("l4Ni")),h=n(a("ujKo")),v=n(a("MhPg"));a("5NDa");var g=n(a("5rEg"));a("y8nQ");var b,y,E,C,w=n(a("Vl3Y")),x=l(a("q1tI")),I=a("i8i4"),S=a("MuoO"),k=n(a("zHco")),D=n(a("ALo4")),L=n(a("lNDh")),M=n(a("t5DV")),V=w.default.Item,N=g.default.Search,T=(b=(0,S.connect)(function(e){var t=e.choiceness,a=e.loading;return{choiceness:t,loading:a.models.list}}),y=w.default.create(),b(E=y((C=function(e){function t(){var e,a;(0,f.default)(this,t);for(var n=arguments.length,l=new Array(n),o=0;o<n;o++)l[o]=arguments[o];return a=(0,m.default)(this,(e=(0,h.default)(t)).call.apply(e,[this].concat(l))),a.state={visible:!1,done:!1,previewVisible:!1,previewImage:""},a.formLayout={labelCol:{span:7},wrapperCol:{span:13}},a.showModal=function(){a.setState({visible:!0,current:void 0})},a.showEditModal=function(e,t){a.setState({visible:!0,current:e,editableIndex:t})},a.handleDone=function(){setTimeout(function(){return a.addBtn.blur()},0),a.setState({done:!1,visible:!1})},a.handleCancels=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){a.setState({previewImage:e.url||e.thumbUrl,previewVisible:!0})},a.handleCancel=function(){setTimeout(function(){return a.addBtn.blur()},0),a.setState({visible:!1})},a.handleSubmit=function(e){e.preventDefault();var t=a.props,n=t.dispatch,l=t.form,o=a.state,i=o.current,r=o.editableIndex,d=i?i.id:"";setTimeout(function(){return a.addBtn.blur()},0),l.validateFields(function(e,t){e||(a.setState({done:!0}),n(d?{type:"choiceness/update",payload:(0,u.default)({id:d,position:"choiceness"},t,{editableIndex:r})}:{type:"choiceness/add",payload:(0,u.default)({position:"choiceness"},t)}))})},a.deleteItem=function(e,t){console.log("content choiceness deleteItem id",e),console.log("content choiceness deleteItem currentIndex",t);var n=a.props.dispatch;n({type:"choiceness/remove",payload:e})},a}return(0,v.default)(t,e),(0,p.default)(t,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e({type:"choiceness/fetch"})}},{key:"render",value:function(){var e=this,t=this.props,a=t.choiceness.data,n=t.loading;console.log("choiceness data",a);var l=this.props.form.getFieldDecorator,f=this.state,p=f.visible,m=f.done,h=f.previewVisible,v=f.previewImage,b=f.current,y=void 0===b?{}:b,E=function(t,a){c.default.confirm({title:"\u5220\u9664\u4efb\u52a1",content:"\u786e\u5b9a\u5220\u9664\u8be5\u4efb\u52a1\u5417\uff1f",okText:"\u786e\u8ba4",cancelText:"\u53d6\u6d88",onOk:function(){return e.deleteItem(t.id,a)}})},C=m?{footer:null,onCancel:this.handleDone}:{okText:"\u4fdd\u5b58",onOk:this.handleSubmit,onCancel:this.handleCancel},S=x.default.createElement("div",{className:M.default.extraContent},x.default.createElement(N,{className:M.default.extraContentSearch,placeholder:"\u8bf7\u8f93\u5165",onSearch:function(){return{}}})),T=function(e){return x.default.createElement("a",{onClick:function(){return E(e.current,e.index)}},"\u5220\u9664")},q=function(){return m?x.default.createElement(D.default,{type:"success",title:"\u64cd\u4f5c\u6210\u529f",description:"\u4e00\u7cfb\u5217\u7684\u4fe1\u606f\u63cf\u8ff0\uff0c\u5f88\u77ed\u540c\u6837\u4e5f\u53ef\u4ee5\u5e26\u6807\u70b9\u3002",actions:x.default.createElement(s.default,{type:"primary",onClick:e.handleDone},"\u77e5\u9053\u4e86"),className:M.default.formResult}):x.default.createElement(w.default,{onSubmit:e.handleSubmit},x.default.createElement(V,(0,d.default)({label:"\u56fe\u7247\u540d\u79f0"},e.formLayout),l("title",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u56fe\u7247\u540d\u79f0"}],initialValue:y.title})(x.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),x.default.createElement(V,(0,d.default)({label:"\u8d44\u6e90\u5b9a\u4f4d\u7b26"},e.formLayout),l("target",{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u8d44\u6e90\u5b9a\u4f4d\u7b26"}],initialValue:y.target})(x.default.createElement(g.default,{placeholder:"\u8bf7\u8f93\u5165"}))),x.default.createElement(V,(0,d.default)({},e.formLayout,{label:"\u56fe\u7247"}),l("imageHash",{rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u56fe\u7247\uff01"}],initialValue:y.imageHash})(x.default.createElement(L.default,null)),x.default.createElement(c.default,{visible:h,footer:null,onCancel:e.handleCancels},x.default.createElement("img",{alt:"example",style:{width:"50%"},src:v}))))};return x.default.createElement(k.default,null,x.default.createElement("div",{className:M.default.standardList},x.default.createElement(o.default,{className:M.default.listCard,bordered:!1,title:"\u56fe\u7247\u5217\u8868",style:{marginTop:24},bodyStyle:{padding:"0 32px 40px 32px"},extra:S},x.default.createElement(s.default,{type:"dashed",style:{width:"100%",marginBottom:8},icon:"plus",onClick:this.showModal,ref:function(t){e.addBtn=(0,I.findDOMNode)(t)}},"\u6dfb\u52a0"),x.default.createElement(i.default,{size:"large",rowKey:"id",loading:n,pagination:(0,u.default)({},a.pagination,{onChange:function(t){var a=e.props.dispatch;a({type:"choiceness/fetch",payload:t})}}),dataSource:a.list,renderItem:function(t,a){return x.default.createElement(i.default.Item,{actions:[x.default.createElement("a",{onClick:function(n){n.preventDefault(),e.showEditModal(t,a)}},"\u7f16\u8f91"),x.default.createElement(T,{current:t,index:a})]},x.default.createElement(i.default.Item.Meta,{avatar:x.default.createElement(r.default,{src:t.imageUrl,shape:"square",size:"large"}),title:t.title}))}}))),x.default.createElement(c.default,(0,d.default)({title:m?null:"\u4efb\u52a1".concat(y?"\u7f16\u8f91":"\u6dfb\u52a0"),className:M.default.standardListForm,width:640,bodyStyle:m?{padding:"72px 0"}:{padding:"28px 0 0"},destroyOnClose:!0,visible:p},C),q()))}}]),t}(x.PureComponent),E=C))||E)||E),q=T;t.default=q},t5DV:function(e,t,a){e.exports={standardList:"antd-pro-pages-content-choiceness-standardList",headerInfo:"antd-pro-pages-content-choiceness-headerInfo",listContent:"antd-pro-pages-content-choiceness-listContent",listContentItem:"antd-pro-pages-content-choiceness-listContentItem",extraContentSearch:"antd-pro-pages-content-choiceness-extraContentSearch",listCard:"antd-pro-pages-content-choiceness-listCard",standardListForm:"antd-pro-pages-content-choiceness-standardListForm",formResult:"antd-pro-pages-content-choiceness-formResult"}}}]);